---
title: Verwenden der integrierten Microsoft Defender für Cloud-Überprüfung zur Sicherheitsrisikobewertung für SQL Server-Instanzen
description: Hier erfahren Sie mehr über die in Microsoft Defender für SQL Server-Instanzen auf Computern integrierte Überprüfung zur Sicherheitsrisikobewertung.
author: memildin
ms.author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 09/14/2021
ms.openlocfilehash: 243cbc8899bc1c15b66b4143aeb48448fd8ac635
ms.sourcegitcommit: 61f87d27e05547f3c22044c6aa42be8f23673256
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 11/09/2021
ms.locfileid: "132058447"
---
# <a name="scan-your-sql-servers-for-vulnerabilities"></a>Überprüfen der SQL-Server auf Sicherheitsrisiken

[!INCLUDE [Banner for top of topics](./includes/banner.md)]

Mit **Microsoft Defender für SQL Server-Instanzen auf Computern** wird der Schutz für Ihre nativen Azure SQL Server-Instanzen erweitert, um Hybridumgebungen vollständig zu unterstützen und SQL Server-Instanzen (alle unterstützten Versionen), die in Azure, anderen Cloudumgebungen oder sogar auf lokalen Computern gehostet werden, schützen zu können:

- [SQL Server auf virtuellen Computern](https://azure.microsoft.com/services/virtual-machines/sql-server/)
- Lokale SQL Server-Instanzen:
  - [SQL Server auf Azure Arc-fähigen Servern](/sql/sql-server/azure-arc/overview)
  - [Auf Windows-Computern ohne Azure Arc ausgeführte SQL Server-Instanzen](../azure-monitor/agents/agent-windows.md)

Der integrierte [Scanner für die Sicherheitsrisikobewertung](../azure-sql/database/sql-vulnerability-assessment.md) ermittelt, verfolgt und unterstützt Sie beim Beheben potenzieller Sicherheitsrisiken für Ihre Datenbanken. Die Ergebnisse des Überprüfungen auf Risikobewertungen bieten einen Überblick über den Sicherheitszustand Ihrer SQL-Computer und Einzelheiten zu allen Sicherheitsergebnissen.

> [!NOTE]
> Die Überprüfung ist einfach, sicher, in wenigen Sekunden pro Datenbank ausgeführt und vollständig schreibgeschützt. Es werden keine Änderungen an Ihrer Datenbank vorgenommen. 

## <a name="explore-vulnerability-assessment-reports"></a>Untersuchen der Berichte zur Sicherheitsrisikobewertung

Der Sicherheitsrisikobewertungs-Dienst scannt Ihre Datenbanken alle 12 Stunden.

Das Sicherheitsrisikobewertungs-Dashboard bietet einen Überblick über Ihre Bewertungsergebnisse für alle Ihre Datenbanken, zusammen mit einer Zusammenfassung der fehlerfreien und fehlerhaften Datenbanken sowie einer Gesamtzusammenfassung der fehlgeschlagenen Prüfungen nach Risikoverteilung.

Sie können die Ergebnisse der Sicherheitsrisikobewertung direkt aus Defender für Cloud anzeigen.

1. Öffnen Sie über die Randleiste von Defender für Cloud die Seite **Empfehlungen**.

1. Wählen Sie die Empfehlung **Ergebnisse der Sicherheitsrisikobewertung zu Ihren SQL Server-Instanzen auf Computern müssen behandelt werden (Vorschau)** aus. Weitere Informationen finden Sie auf der [Referenzseite mit den Defender für Cloud-Empfehlungen](review-security-recommendations.md). 

    :::image type="content" source="./media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png" alt-text="Ergebnisse der Sicherheitsrisikobewertung auf Ihren SQL-Servern auf Computern müssen beseitigt werden. (Vorschau)":::

    Die detaillierte Ansicht für diese Empfehlung wird angezeigt.

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/sql-vulnerability-findings.png" alt-text="Ausführliche Ansicht der Empfehlung":::

1. Für weitere Details führen Sie einen Drilldown aus:

    - Um eine Übersicht über gescannte Ressourcen (Datenbanken) und die Liste der getesteten Sicherheitsüberprüfungen zu erhalten, öffnen Sie die **betroffenen Ressourcen**, und wählen Sie den gewünschten Server aus.

    - Wählen Sie die gewünschte Datenbank aus, um eine Übersicht über die Sicherheitsrisiken zu erhalten, die nach einer bestimmten SQL-Datenbank gruppiert sind.

    Die Sicherheitsüberprüfungen werden in jeder Ansicht nach **Schweregrad** sortiert. Wählen Sie eine bestimmte Sicherheitsüberprüfung aus, um einen Detailbereich mit einer **Beschreibung** anzuzeigen sowie **Empfehlungen zur Behebung von Problemen** und andere verwandte Informationen wie zur **Auswirkung** oder **Benchmark** zu erhalten.

## <a name="set-a-baseline"></a>Festlegen einer Baseline 

Bei der Überprüfung Ihrer Bewertungsergebnisse können Sie Ergebnisse als akzeptable Baseline für Ihre Umgebung markieren. Die Baseline ist im Wesentlichen eine Anpassung der Art, in der die Ergebnisse berichtet werden. Wenn Ergebnisse in nachfolgenden Überprüfungen mit der Baseline übereinstimmen, wird dies als Bestehen gewertet. Nach dem Festlegen des Baselinesicherheitsstatus meldet die Sicherheitsrisikobewertungsüberprüfung nur noch Abweichungen von der Baseline. Dadurch können Sie sich auf die relevanten Probleme konzentrieren.

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/analyze-report-for-details.png" alt-text="Bei der Überprüfung Ihrer Bewertungsergebnisse können Sie Ergebnisse als akzeptable Baseline für Ihre Umgebung markieren.":::

## <a name="export-results"></a>Exportieren von Ergebnissen

Exportieren Sie mit der Microsoft Defender für Cloud-Funktion [Fortlaufender Export](continuous-export.md) Ergebnisse der Sicherheitsrisikobewertung in Azure Event Hub oder in den Log Analytics-Arbeitsbereich. 

## <a name="view-vulnerabilities-in-graphical-interactive-reports"></a>Anzeigen von Sicherheitsrisiken in grafischen, interaktiven Berichten

Der in Defender für Cloud integrierte Azure Monitor-Arbeitsmappenkatalog enthält einen interaktiven Bericht aller Ergebnisse der Sicherheitsrisikoüberprüfung für Computer, Container in Containerregistrierungen und SQL Server-Instanzen.

Die Ergebnisse der einzelnen Überprüfungen werden in separaten Empfehlungen angezeigt:

- Sicherheitsrisiken für VMs müssen behoben werden
- Sicherheitsrisiken in Azure Container Registry-Images müssen behoben werden (unterstützt von Qualys).
- Ergebnisse der Sicherheitsrisikobewertung in Ihren SQL Datenbanken müssen beseitigt werden
- Ergebnisse der Sicherheitsrisikobewertung auf Ihren SQL-Servern auf Computern müssen beseitigt werden

Der Bericht „Ergebnisse der Sicherheitsrisikobewertung“ sammelt alle diese Ergebnisse und organisiert sie nach Schweregrad, Ressourcentyp und Kategorie. Sie finden den Bericht im Arbeitsmappenkatalog, der über die Defender für Cloud-Randleiste verfügbar ist.

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/vulnerability-assessment-findings-report-sql.png" alt-text="Bericht zu den Ergebnissen der Sicherheitsrisikobewertung in Defender für Cloud":::


## <a name="disable-specific-findings-preview"></a>Deaktivieren bestimmter Ergebnisse (Vorschau)

Wenn in Ihrer Organisation eine Suche ignoriert werden muss, anstatt sie zu beheben, können Sie sie optional deaktivieren. Deaktivierte Ergebnisse haben keine Auswirkung auf Ihre Sicherheitsbewertung und erzeugen kein unerwünschtes Rauschen.

Wenn eine Suche mit den in Ihren Deaktivierungsregeln definierten Kriterien übereinstimmt, wird sie nicht in der Liste der Ergebnisse angezeigt. Zu den typischen Szenarien gehören:

- Deaktivieren von Ergebnissen mit einem Schweregrad unterhalb des Mittelwerts
- Deaktivieren von nicht patchbaren Ergebnissen
- Deaktivieren Sie die Ergebnisse von Vergleichstests (Benchmarks), die für einen definierten Bereich nicht von Interesse sind.

> [!IMPORTANT]
> Zum Deaktivieren bestimmter Ergebnisse benötigen Sie Berechtigungen zum Bearbeiten von Richtlinien in Azure Policy. Weitere Informationen finden Sie unter [Azure RBAC-Berechtigungen in Azure Policy](../governance/policy/overview.md#azure-rbac-permissions-in-azure-policy).

So erstellen Sie eine Regel:

1. Wählen Sie auf der Seite mit den Empfehlungsdetails für **Ergebnisse der Sicherheitsrisikobewertung zu Ihren SQL Server-Instanzen auf Computern müssen behandelt werden** die Option **Regel deaktivieren** aus.

1. Wählen Sie den entsprechenden Gültigkeitsbereich aus.

1. Definieren Sie Ihre Kriterien. Sie können auch eines der folgenden Kriterien verwenden: 
    - Ergebnis-ID 
    - severity 
    - Vergleichstests 

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/disable-rule-vulnerability-findings-sql.png" alt-text="Erstellen einer Deaktivierungsregel für Ergebnisse der Sicherheitsrisikobewertung in SQL Server-Instanzen auf Computern":::

1. Wählen Sie **Regel anwenden** aus. Es kann bis zu 24 Stunden dauern, bis Änderungen wirksam wird.

1. So können Sie eine Regel anzeigen, überschreiben oder löschen 

    1. Wählen Sie **Regel deaktivieren** aus.

    1. In der Bereichsliste werden Abonnements mit aktiven Regeln als **Rule applied** (Angewandte Regel) angezeigt.

        :::image type="content" source="./media/remediate-vulnerability-findings-vm/modify-rule.png" alt-text="Ändern oder Löschen einer vorhandenen Regel":::

    1. Um die Regel anzuzeigen oder zu löschen, wählen Sie das Menü mit den Auslassungspunkten („...“) aus.

## <a name="manage-vulnerability-assessments-programmatically"></a>Programmgesteuertes Verwalten von Sicherheitsrisikobewertungen

### <a name="using-azure-powershell"></a>Verwenden von Azure PowerShell

Sie können die Azure PowerShell-Cmdlets verwenden, um Ihre Sicherheitsrisikobewertungen programmgesteuert zu verwalten. Die unterstützten Cmdlets sind die folgenden:

| Cmdlet-Name als Link | BESCHREIBUNG |
| :-------------------- | :---------- |
| [Add-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/add-azsecuritysqlvulnerabilityassessmentbaseline) | Hinzufügen der Baseline für die SQL-Sicherheitsrisikobewertung |
| [Get-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentbaseline) | Abrufen der Baseline für die SQL-Sicherheitsrisikobewertung |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanResult](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanresult) | Abrufen der Überprüfungsergebnisse der SQL-Sicherheitsrisikobewertung |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanRecord](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanrecord) | Abrufen der Überprüfungsdatensätze der SQL-Sicherheitsrisikobewertung |
| [Remove-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/remove-azsecuritysqlvulnerabilityassessmentbaseline) | Entfernt die Baseline für die SQL-Sicherheitsrisikobewertung. |
| [Set-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/set-azsecuritysqlvulnerabilityassessmentbaseline) | Festlegen einer neuen Baseline für die SQL-Sicherheitsrisikobewertung für eine bestimmte Datenbank. Die alte Baseline (sofern vorhanden) wird verworfen. |
| &nbsp; | &nbsp; |

## <a name="data-residency"></a>Datenresidenz

Bei der SQL-Sicherheitsrisikobewertung wird SQL Server mithilfe öffentlich verfügbarer Abfragen gemäß den Defender für Cloud-Empfehlungen für die SQL-Sicherheitsrisikobewertung abgefragt, und die Abfrageergebnisse werden gespeichert. Die Daten der SQL-Sicherheitsrisikobewertung werden am Standort des Log Analytics-Arbeitsbereichs gespeichert, mit dem der Computer verbunden ist. Wenn der Benutzer beispielsweise einen virtuellen SQL-Computer mit einem Log Analytics-Arbeitsbereich in „Europa, Westen“ verbindet, werden die Ergebnisse in „Europa, Westen“ gespeichert. Diese Daten werden nur gesammelt, wenn die Lösung zur SQL-Sicherheitsrisikobewertung im Log Analytics-Arbeitsbereich aktiviert ist.

Metadateninformationen zum verbundenen Computer werden ebenfalls gesammelt. Dies betrifft insbesondere:

-   Betriebssystemname, -typ und -version
-   Vollqualifizierter Domänenname (FQDN) des Computers
-   Version des Connected Machine-Agents
-   UUID (BIOS-ID)
-   SQL Server-Name und zugrunde liegende Datenbanknamen

Sie können die Region angeben, in der die Daten Ihrer SQL-Sicherheitsrisikobewertung gespeichert werden, indem Sie den Standort des Log Analytics-Arbeitsbereichs auswählen. Microsoft kann die Daten in Hinblick auf die Datenresilienz in anderen Regionen replizieren. Microsoft repliziert aber keine Daten außerhalb des geografischen Gebiets.

## <a name="next-steps"></a>Nächste Schritte

Weitere Informationen zu den Defender für Cloud-Schutzmechanismen für SQL-Ressourcen finden Sie unter [Einführung in Microsoft Defender für SQL](defender-for-sql-introduction.md).
